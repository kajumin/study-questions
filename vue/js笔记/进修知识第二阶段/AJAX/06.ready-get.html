<!DOCTYPE html>
<html>
<head>
	<title>ajax发送GET请求并传递参数</title>
	<meta charset="utf-8">
</head>
<body>
	<ul id="list">
	</ul>
<script>
	var xhr = new XMLHttpRequest()
	xhr.open('GET','http://localhost/ajax/users.php')
	xhr.send()
	xhr.onreadystatechange= function() {
		if(this.readyState === 4 ){
			var list=document.querySelector('#list')
			var json = JSON.parse(this.responseText)

			// var lis=document.querySelectorAll('li')
			for(i=0;i<json.length;i++) {		
				
				var liElement = document.createElement('li')
				liElement.id = json[i]['id']
				liElement.innerHTML = json[i]['name']
				list.appendChild(liElement)

				liElement.addEventListener('click',function(){
					console.log(1)
					var xhr1 = new XMLHttpRequest()
					xhr1.open('GET','http://localhost/ajax/users.php?id='+this.id)
					xhr1.send()
					xhr1.onreadystatechange = function() {
						if(this.readyState ===4) {
							var obj = JSON.parse(this.responseText)
							alert(obj['name']+'的年龄为'+obj['age']+'岁')
						}
					}
				})
			}
			
		}
	}
</script>
</body>
</html>