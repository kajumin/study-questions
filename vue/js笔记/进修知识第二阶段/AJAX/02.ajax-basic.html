<!DOCTYPE html>
<html>
<head>
	<title></title>
</head>
<body>
<script>
	
	var xhr = new XMLHttpRequest()
	console.log(xhr.readyState) //0  初始化请求代理对象


	xhr.open('GET','http://localhost/ajax/time.php')
	console.log(xhr.readyState) //1  open方法已经被调用  send()之后还是1

	xhr.send()

	// 如果需要要获取到1  需要调整位置
	// 所以ajax api采用事件的机制(通知的感觉)
	// xhr.addEventLister('readystatechange',function(){})
	xhr.onreadystatechange = function() {

		switch(this.readyState){
			case 2:
				//可以拿到头 
				console.log(this.getAllResponseHeaders())
				console.log(this.getResponseHeader('content-type'))
				console.log(this.getResponseHeader('content-length'))
				// console.log(this.getAllResponseHeader().split("\n"))
				console.log(this.readyState)
				// 还没拿到
				break
			case 3:
				// 正在下载响应的响应体
				console.log(this.readyState)
				console.log(this.responseText) //下载中 可能不完整
				break
			case 4:
				// 响应完成 
				console.log(this.readyState)
				console.log(this.responseText)
				break
		}
		if(this.readyState!== 4) return

		// 2   已经接受到了响应报文的响应头
		// 3   
		// console.log(this.readyState)
		console.log(this.responseText)
	}
</script>
</body>
</html>