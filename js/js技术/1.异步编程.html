<!DOCTYPE html>
<html>
<head>
	<title></title>
</head>
<body>
	<div id="app" >
		<child :value="value" @change="change"></child>
	</div>
<script type="text/javascript">
	/*
	异步编程:
	(1)回调函数
	(2)事件监听
	(3)发布订阅模式
	(4)Promise
	(5)Generator (ES6)
	(6)async (ES7)
	异步编程传统的解决方案：回调函数和事件监听
	回调函数: setTimeout setInterval
	事件监听: addEventListener onclick
	发布订阅模式: var eventBus = new Vue() eventBus.@on  eventBus.@emit
	promise: new Promise((resolve, reject) => { resolve(res) })
	generator: function* (){ yield 1+1; yield 'aaa' }
	async function() { await new Promise(resolve => resolve(1)) }
	*/
</script>
<script type="text/javascript" src="vue.js"></script>
<script type="text/javascript">
	var eventBus = new Vue()
	var child = {
		template: `<div>
			<div>{{value}}</div>
			<button @click="changeText">改变</button>
			<button @click="changeText2">改变</button>
		</div>`,
		props: ['value'],
		methods: {
			changeText() {
				console.log('text')
				this.$emit('change', 'child')
			},
			changeText2() {
				console.log('changeText2')
				eventBus.$emit('change-text2', 'child2')
			}
		}
	}
	var app = new Vue({
		el: '#app',
		data: {
			value: 'parent'
		},
		created() {
			console.log(this)
			eventBus.$on('change-text2', (val) => {
				this.value = val
			})
		},
		methods: {
			change(val) {
				this.value = val
			}
		},
		components: {
			child
		}
	})
</script>
</body>
</html>