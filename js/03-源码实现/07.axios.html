<!DOCTYPE html>
<html>
<head>
	<title></title>
</head>
<body>
<script type="text/javascript">
	let cancel;
	axios.interceptors.request.use(function(config){
		if(cancel) {
			cancel('请求取消!');
		}
		config.cancelToken = new axios.CancelToken(function executor(c){
			cancel = c;
		});
		return  config;
	})
	axios.interceptors.response.use(function(response) {
		cancel = null;
		return response;
	},(err)=>{
		if(axios.isCancel(err)){
			console.log('取消请求错误!')
		}else {
			cancel = null;
          	return new Promise.reject(err);
		}
	})

	function request1(url) {
		axios.get(url)
		.then(res=>{
			console.log(res.data)
		},err=>{
			console.log(err.message)
		})
	}

	let req1 = request1('http://localhost:3000/');
	let req2 = request1('http://localhost:3000/');
	axios.all([req1,req2])
	.then(axios.spead((res1,res2)=>{
		console.log(res1)
		console.log(res2)
	}))

	axios.get('http://localhost:3000/',{transformRequest:[function(data){
		return data;
	}]})

</script>
</body>
</html>