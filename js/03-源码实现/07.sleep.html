<!DOCTYPE html>
<html>
<head>
	<title></title>
</head>
<body>
	<!-- 
	1.es5方式实现 回调函数
	2.基于promise实现
	3.基于async实现
	4.基于Date 死循环来阻止代码执行
	5.基于generator实现
	 -->
<script>
	// 1.es方式实现
	function sleep(callback, time) {
		setTimeout(callback, time)
	}
	function output() {
		console.log(1)
	}
	sleep(output, 1000)

	// 2.基于promise实现
	function sleep2(time) {
		return new Promise((resolve, reject) => {
			setTimeout(resolve, time)
		})
	}
	sleep2(1000)
	.then(res => {
		console.log(2)
	})

	function sleep3(time) {
		return new Promise((resolve, reject) => {
			setTimeout(resolve, time)
		})
	}
	async function init() {
		var temp = await sleep3(1000)
		console.log(3)
	}
	init()

	;(function() {
		function sleep4(time){
	 		var timeStamp = new Date().getTime();
			var endTime = timeStamp + time;
	 		while(true){
	 			if (new Date().getTime() > endTime){
	  				return;
	 			} 
	 		}	
		}
		sleep4(1000)
		console.log(4)
	})()

	function sleep5(time) {
		return new Promise((resolve, reject) => {
			setTimeout(resolve, time)
		})
	}
	var fun = function* () {
		console.time('runTime:');
		yield sleep5(1000)
		console.log(5)
		console.timeEnd('runTime:');
	}
	var f = fun()
	f.next()
	f.next()
	console.log('end')
	
</script>
</body>
</html>