<!DOCTYPE html>
<html>
<head>
	<title></title>
</head>
<body>
<!-- 
1、了解 Promise 吗？
2、Promise 解决的痛点是什么？
3、Promise 解决的痛点还有其他方法可以解决吗？如果有，请列举。
4、Promise 如何使用？
5、Promise 常用的方法有哪些？它们的作用是什么？
6、Promise 在事件循环中的执行过程是怎样的？
7、Promise 的业界实现都有哪些？
8、能不能手写一个 Promise 的 polyfill。
-->
<!-- 回调地狱:
代码臃肿。
可读性差。
耦合度过高，可维护性差。
代码复用性差。
容易滋生 bug。
只能在回调里处理异常。 -->
<script type="text/javascript" src="../../static/js/jquery-3.4.1.min.js"></script>
<script type="text/javascript">
	//如果传入的 value 本身就是 Promise 对象，则该对象作为 Promise.resolve 方法的返回值返回。  
	function fn(resolve){
	    setTimeout(function(){
	        resolve(123);
	    },1000);
	}
	let p0 = new Promise(fn);
	p0.then(res=>{
		console.log(res) //123
	})
	let p1 = Promise.resolve(p0);
	// 返回为true，返回的 Promise 即是 入参的 Promise 对象。
	console.log(p0 === p1);

	//如果传入的 value 本身就是 thenable 对象，返回的 promise 对象会跟随 thenable 对象的状态。
	// let promise = Promise.resolve($.ajax('/test/test.json'));// => promise对象
	// promise.then(function(value){
	//    console.log(value);
	// });
	

	let p2 = Promise.resolve(123); 
	//打印p1 可以看到p2是一个状态置为resolved的Promise对象
	console.log(p2)

	const promise1 = new Promise((resolve, reject) => {
	  setTimeout(() => {
	    resolve('success')
	  }, 1000)
	})
	const promise2 = promise1.then(() => {
	  throw new Error('error!!!')
	})

	console.log('promise1', promise1)
	console.log('promise2', promise2)

	setTimeout(() => {
	  console.log('promise1', promise1)
	  console.log('promise2', promise2)
	}, 2000)


</script>
</body>
</html>