<!DOCTYPE html>
<html>
<head>
	<title></title>
</head>
<body>
<script type="text/javascript">
	//promsie 链式调用 catch 可以写在最后一个then的后面
    console.log('strat')
    new Promise( (resolve, reject)=>{
        setTimeout(()=>{
            resolve(1)
        }, 1000)
    }).then( res =>{
        console.log(res) //1
        return res + 10
    }).then( res =>{
        console.log(res) //11
        return new Promise( resolve => resolve( res + 20))
    }).then( a =>{
        console.log(a) //31 
    })
    console.log('end')
    
    // then catch 以后还会返回一个新的promise
    //promsie  catch可以捕获 promise里面 或者then里面的错误 可以写在最后一个then的后面
    console.log('strat')
    new Promise( (resolve, reject)=>{
        setTimeout(()=>{
            // reject('reject in 1')//捕捉 promsie里面的错误
            resolve(1)//捕捉 promsie里面的错误
        }, 1000)
    }).then( res =>{
        console.log(res) //1
        // throw 'then 异常'
        // throw new Error('异常')
        return res + 10
    }).then( res =>{
        console.log(res) //11
        // return new Promise( resolve => resolve( res + 20))
        return res + 20
    }).then( a =>{
        console.log(a) //31 
    }).catch( err =>{
        // console.log(err)//reject in 1
        console.log(err)//then 异常
    })
    console.log('end')
</script>
</body>
</html>