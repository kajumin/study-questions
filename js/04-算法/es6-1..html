<!DOCTYPE html>
<html>
<head>
	<title></title>
</head>
<body>
	<!-- 
	string
	01.判断字符串长度 for(var o of str) length++
	02.判断是否32位字符串
	number
	01.number.isFinite
	02.number.isNaN
	03.number.isInteger
	04.Math.trunc
	05.Math.sign
	array
	object
	regexp
	01.去除空格   text.replace(/^\s+|\s+$/g, '')
	02.字符串长度 text.match(/[\S\s]/gu); 
	function
	
	-->
<script>
	// string 2的32次方
	// 01.判断字符串的长度 正确识别32位的utf-16字符 FFFF(16位)
	// charCodeAt 返回unicode编码
	// codePointAt 返回unicode编码 能识别32位的utf-16字符
	function strLength(text) {
		var length = 0;
		for(let o of text) {
			length++
		}
		return length
	}
	console.log('𠮷𠮷abc'.charCodeAt(0)) //55362
	console.log('𠮷𠮷abc'.codePointAt(0)) //134071
	console.log('𠮷𠮷abc'.length) //7
	console.log(strLength('𠮷𠮷abc')) //5

	// 判断是否32位的字符串
	function is32Bit(c) {
		return c.codePointAt(0) > 0xFFFF
	}
	console.log(is32Bit('𠮷')) //true
	console.log(is32Bit('2')) //false

	// number.isFinite number.isNaN 实现都是typeof value === 'number'
	// Number.isFinite 检查一个数值是否为有限的, 必须是数值
	// isFinite 检查一个值是否为有限的 
	// Number.isNaN 检查一个数值是否为NaN, 非NaNdou 返回false
	// isNaN 检查一个值是否为NaN 
	console.log(isFinite(Infinity)) //true
	console.log(isFinite(-Infinity)) //true
	console.log(isFinite('123')) //true

	console.log(Number.isFinite(Infinity)) //true
	console.log(Number.isFinite(-Infinity)) //true
	console.log(Number.isFinite('123')) //false

	console.log('Number.isNaN')
	console.log(isNaN(NaN)) //true
	console.log(isNaN('abc')) //true

	console.log(Number.isNaN(NaN)) //true
	console.log(Number.isNaN('abc')) //false

	// es5环境部署isFinite
	// 直接使用object.prototype会可以遍历
	;(function(global){
		var global_isFinite = global.isFinite

		Object.defineProperty(Number, 'isFinite', {
			value: function isFinite(value) {
				return typeof value === 'number' && global_isFinite(value)
			},
			configurable: true,
			enumerable: false,
			writable: true
		})
	})(this)

	;(function(global){
		var global_isNaN = global.isNaN

		Object.defineProperty(Number, 'isNaN', {
			value: function isNaN(value) {
				return typeof value === 'number' && global_isNaN(value)
			},
			configurable: true,
			writable: true,
			enumerable: false
		})
	})(this)

	console.log('Number.isInteger')
	console.log(Number.isInteger(1.0)) //true
	console.log(Number.isInteger(1.1)) //false
	console.log(Number.isInteger('1')) //false

	;(function(global){
		var global_isFinite = global.isFinite
		var floor = Math.floor

		Object.defineProperty(Number, 'isInteger', {
			value: function isInterager(value) {
				return typeof value === 'number' && global_isFinite(value) && floor(value) === value
			},
			configurable: true,
			writable: true,
			enumerable: false
		})
	})(this)

	// Math.trunc 去除小数部分 返回整数部分 非数值转为数值, 其他值为NaN
	// Math.sign 判断一个值是正数 负数 还是零 对于非数值转为数值, 其他值为NaN
	Math.trunc = Math.trunc || function(x) {
		return x < 0 ? Math.ceil(x) : Math.floor(x);
	};
	Math.sign = Math.sign || function(x) {
		x = +x //转为number
		if(x === 0 || isNaN(x)) {
			return x
		}
		return x > 0 ? 1: -1
	};
	// array
	// object
	// regexp
	// 去除空格
	function trim(text) {
		return text.replace(/^\s+|\s+$/g, '')
	}
	console.log(trim('  123456  ').length)

	function codePointLength(text) {
 		var result = text.match(/[\S\s]/gu);
 		console.log(result)// ['𠮷', '𠮷']
 		return result ? result.length : 0;
 	}
 	console.log('𠮷𠮷'.length) //4
 	console.log(codePointLength('𠮷𠮷')) //2


	// function
</script>
</body>
</html>