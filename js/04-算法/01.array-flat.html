<!DOCTYPE html>
<html>
<head>
	<title></title>
</head>
<body>

<script type="text/javascript">
	/*
	1.arr.flat(Infinity) 原生方法
	2.JSON.stringify(arr) str.replace(/(\[|\])/g, '') '['+ str + ']'
	3.递归处理 arr.push(item)
	4.reduce处理 pre.concat(Array.isArray(cur) ? flatten(cur) : cur)
	5.concat处理 result.some(item => item instanceof Array)
	  result = [].concat.apply([], result)
 	*/
	let arr = [1, [2, [3, [4, 5]]], 6];
	
	//1.
	console.log(arr.flat(Infinity))

	//2.
	// let str = arr.toString();
	let str = JSON.stringify(arr);
	str = str.replace(/(\[|\])/g, '')
	str = JSON.parse('['+str+']')
	console.log(str)

	//第三种处理：递归处理
	let result = [];
	let fn = function(ary) {
	  for(let i = 0; i < ary.length; i++)  {
	    let item = ary[i];
	    if (item instanceof Array){
	      fn(item);
	    } else {
	      result.push(item);
	    }
	  }
	}
	fn(arr)
	console.log(result)

	// reduce
	function flatten(ary) {
    	return ary.reduce((pre, cur) => {
        	return pre.concat(Array.isArray(cur) ? flatten(cur) : cur);
    	}, []);
	}
	console.log(flatten(arr))

	function flatten(arr) {
		let result = [].concat.apply([], arr)
		while(result.some(item => item instanceof Array)) {
			result  = [].concat.apply([], result)
		}
		return result
	}
	console.log(flatten(arr))


	// 手写flat 可以指定次数 Infinity
	Array.prototype.flat = function (num) {

		var arr = this
		var flat = (arr, num) => arr.reduce((prev, curr) => {		
			if(typeof num === 'number') {
				num--
			} 
			return prev.concat(Array.isArray(curr) && num ? flat(curr,num) : curr)
		}, []);
		return flat(arr, num)
	}

	

</script>
</body>
</html>