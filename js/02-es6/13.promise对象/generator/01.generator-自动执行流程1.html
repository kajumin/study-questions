<!DOCTYPE html>
<html>
<head>
	<title></title>
</head>
<body>
<!-- 
函数参数求值策略:
(1)传值调用: 比较简单, 但是对参数求值的时候, 实际上还没有用到这个参数, 有可能造成性能损失
(2)传名调用: 往往实现是讲参数放到一个临时函数中, 将这个临时函数传入函数体,
这个临时函数就叫thunk函数

js是传值调用, 它的thunk函数含义不同, 在js中, thunk函数替换的不是表达式, 二是多个参数, 将其替换成一个只接受回调函数作为参数的单参数函数

thunk函数的作用用于控制generator函数的自动流程管理

generator的自动流程管理(异步): 
基于thunk函数的generator自动流程管理
    因为thunk可以在回调函数中将执行权交回给generator函数, 在自动执行器中
基于promise的generator自动流程管理
    promise可以在.then回调函数中将执行权交回给generator函数

//co模块同样是自动执行器
 -->
<script>
	// 传值调用
	var x = 1
	// function f(m) {
	// 	return m * 2
	// }
	// var result = f(x + 5)
	// console.log(result)

	// 传名调用
	function thrunk() {
		return x + 5
	}
	function f(t) {
		return t() * 2
	}
	var result2 = f(thrunk)
	console.log(result2)

	// 正常版本的readFile(多参数)	
	fs readFile(fileName, callback)

	// thunk版本的readFile(单参数版本)

	var Thunk = function (fileName) {
		return function(callback) {
			return fs.readFile(fileName, callback)
		}
	}
	var readFileThunk = Thunk('./1.txt')
	readFileThunk(callback)
	function callback (err, data) {
		console.log(data)
	}
</script>
</body>
</html>