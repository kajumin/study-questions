<!DOCTYPE html>
<html>
<head>
	<title></title>
</head>
<body>
<script>
	var myAjax = function(url, callback) {
		var client = new XMLHttpRequest()
		client.open('GET', url)
		client.onreadystatechange = handle
		client.responseType = 'json'
		client.setRequestHeader('Accept', 'application/json; charset=utf-8')
		client.send()

		function handle() {
			if(this.readyState !== 4) {
				return;
			}
			if(this.status === 200) {
				callback(this.response)
			} else {
				callback(new Error(this.statusText))
			}
		}
	}
	// myAjax('http://localhost:3000/getJson', function (res) {
	// 	console.log(res)
	// })

	function* main() {
		var result = yield request('http://localhost:3000/getJson')
		console.log(result)
		var resp = JSON.stringify(result)
		console.log(resp)
	}
	function request(url) {
		myAjax('http://localhost:3000/getJson', function(response) {
			it.next(response)
		})
	}

	var it = main()
	it.next()
</script>
</body>
</html>